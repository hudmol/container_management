<div class="row-fluid">
  <div class="record-pane">
    <h2>
      <% if results['resource'] %>
        <%= results['resource']['title']  %> --
      <% end %>
      <%= results['object']['title'] %>
      <span class="label label-info"><%= I18n.t("#{results['object']['jsonmodel_type']}._singular") %>
    </h2>
    <div>
      <h3>
        Calculated Extent Report
      </h3>
      <table class="table table-striped table-bordered table-condensed table-hover">
        <thead>
          <tr>
            <th>Container profile</th>
            <th>Count</th>
            <th>Extent</th>
          </tr>
        </thead>
        <tbody>
        <% if results['containers'] %>
          <% results['containers'].each_pair do |k, v| %>
            <tr>
              <td><%= k %></td>
              <td><%= v['count'] %></td>
              <td><%= v['extent'] %></td>
            </tr>
          <% end %>
        <% end %>
        <% if results['container_without_profile_count'] > 0 %>
          <tr>
            <td>NO PROFILE</td>
            <td><%= results['container_without_profile_count'] %></td>
            <td>--</td>
          </tr>
        <% end %>
          <tr>
            <td>All containers</td>
            <td><%= results['container_count'] %></td>
            <td>
              <strong>
                <%= results['total_extent'] %>
                <%= results['volume'] ? 'cubic' : 'linear'  %>
                <%= results['units'] %>
              </strong>
            </td>
          </tr>
        </tbody>
      </table>
      <div>
        <small>Report generated at <strong><%= results['timestamp'] %></strong></small>
      </div>
    </div>

  <% if extent %>
    <div>
      <h3>
        Extent Record
        <div class="pull-right">
          <button class="btn btn-cancel" data-dismiss="modal">Close</button>
          <a href="javascript:void(0);" class="btn btn-primary create-extent-btn">Create Extent</a>
        </div>
      </h3>

      <%= form_for extent, :as => "extent", :url => {:action => :index}, :html => {:class => 'form-horizontal aspace-record-form', :id => "extent_form"} do |f| %>

      <div class="row-fluid">
        <div class="span3"></div>

        <div class="span9">
          <div class="record-pane">
            <div class="subrecord-form-container">
              <%= form_context :extent, extent do |form| %>
                <%= render_aspace_partial :partial => "extents/template" %>
                <% form.emit_template("extent") %>
              <% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div>
      <h3>
        Extent Record
        <div class="pull-right">
          <button class="btn btn-cancel" data-dismiss="modal">Close</button>
        </div>
      </h3>
      <div class="row-fluid">
        <div class="span3"></div>
        <div class="span9">
          <p>Run the Extent Calculator in edit mode to have the option of creating an extent record based on the report.</p>
        </div>
      </div>
    </div>
  <% end %>

  </div>
</div>
